# Обработка файлов

Обработка файлов - этот функционал позволяет открывать файлы, 
переводить их с помощью [плагинов перевода](translate_text.md), 
создавать результирующие файлы и сохранять в них результат.

Обработка файлов осуществляется независимыми модулями (плагинами) каждый плагин поддерживает определенный формат
(или несколько форматов) файлов.

## Список поддерживаемых плагинов

* **file_epub** - [документация](plugins-file-processing/file_epub.md). Перевод книг в формате epub.


* **file_fb2** - [документация](plugins-file-processing/file_fb2.md). Перевод книг в формате fb2.


* **file_txt** - [документация](plugins-file-processing/file_txt.md). Перевод книг в формате txt.

## Параметры, которые задаются в основной конфигурации

Некоторые параметры не настраиваются в плагинах, например, пути для исходных / обработанных файлов.
Эти параметры описаны [здесь](options.md), в пункте **file_processing_params**.

## Параметры, общие для всех плагинов

Список параметров, которые есть в каждом плагине.

* **default_extension_processor** - типы файлов по умолчанию, для которых плагин выполняет обработку.
  Необходимо для тех случаев, когда один и тот же тип файлов могут обработать несколько плагинов - 
  тогда будет выбран тот плагин, для которого установлен этот параметр.


* **enabled** - плагин включен / выключен.


* **output_file_name_template** - параметры шаблонов имен для файла с результатом обработки. Подробнее - ниже в разделе
  **Шаблоны имен для файлов**
* * **preserve_original** - шаблон для имени с сохранением оригинального текста. 
* * **preserve_original** - шаблон для имени без сохранения оригинального текста.

### Шаблоны имен для файлов

В шаблоне поддерживаются следующие переменные:

* `%%source%%` - имя исходного файла (без расширения).
* `%%from_lang%% `- язык исходного файла.
* `%%to_lang%%` - язык на который был выполнен перевод.

Таким образом, если шаблон имеет вид `%%source%%__%%from_lang%%_%%to_lang%%`, файл назывался `my book.epub`,
и переводился с английского (en) языка на русский (ru), результат будет сохранен в файл с именем `my book_en_ru.epub`.

### Параметры форматирования
Как правило, настройки плагинов будут содержать параметры форматирования - группу параметров **text_format**.

Форматирование полезно в том случае, если в файле результата сохраняется исходный и переведенный текст - 
чтобы подсветить тип(ы) текста. Например, можно сделать оригинальный текст жирным, а переведенный - не менять,
или оригинальный текст не менять, а переведенный - выделить курсивом.